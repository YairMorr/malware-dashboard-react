import React, { Component } from "react";
import XAxis from "./XAxis";
import ChartInfo from "./ChartInfo";

class Plot extends Component {
  state = {
    xAxisRenderFactor: 7
  };

  render() {
    return (
      <div className="container plot">
        <ul id="column">
          {this.props.data.map((chart, index) => {
            return (
              <li key={chart.id} id={chart.id}>
                <div
                  className="chart-column"
                  style={{
                    height:
                      Math.floor(
                        (chart.value / this.props.chartMaxHeight) * 100
                      ) + "%"
                  }}
                  alt={chart.date}
                >
                  <ChartInfo data={chart} />
                  {(chart.name ||
                    index % this.state.xAxisRenderFactor === 0) && (
                    <div className="tick-mark"></div>
                  )}
                </div>

                <XAxis
                  chart={chart}
                  textRotation={this.props.textRotation}
                  index={index}
                  renderFactor={this.state.xAxisRenderFactor}
                />
              </li>
            );
          })}
        </ul>
      </div>
    );
  }
}

export default Plot;
